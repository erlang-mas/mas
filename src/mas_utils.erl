%%%-------------------------------------------------------------------
%% @doc Common use utility functions.
%% @end
%%%-------------------------------------------------------------------

-module(mas_utils).

%% API
-export([group_by/1, shuffle/1]).

%%%===================================================================
%%% API functions
%%%===================================================================

%%--------------------------------------------------------------------
%% @doc Groupes listed tuples by first element:
%% [{K1, V1}, {K2, V2}, {K1, V3}, {K2, V4}] =>
%% [{K1, [V1, V3]}, {K2, [V2, V4]}].
%% @end
%%--------------------------------------------------------------------
group_by(L) ->
    FoldFunc = fun({K, V}, D) -> dict:append(K, V, D) end,
    Dict = lists:foldl(FoldFunc, dict:new(), L),
    dict:to_list(Dict).

%%--------------------------------------------------------------------
%% @doc Randomly shuffles elements in the list.
%% @end
%%--------------------------------------------------------------------
shuffle(L) ->
    Rand = [{rand:uniform(), N} || N <- L],
    [X || {_, X} <- lists:sort(Rand)].
